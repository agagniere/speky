kind: tests
category: functional
tests:
- id: TMCP016
  ref: [MCP006]
  short: List tests for requirement with one test
  long: Query which tests validate a requirement that has exactly one test
  prereq: [TMCP003]
  steps:
  - action: The client calls `list_testers_of` with ID `RF01`
    sample_lang: json
    sample: |
      {
        "id": 2,
        "jsonrpc": "2.0",
        "method": "tools/call",
        "params": {
          "name": "list_testers_of",
          "arguments": {"id": "RF01"}
        }
      }
  - action: Verify the response contains T01
    sample_lang: json
    sample: |
      {
        "id": 2,
        "jsonrpc": "2.0",
        "result": {
          "structuredContent": {
            "tests": [
              {"category": "functional", "id": "T01"}
            ]
          }
        }
      }

- id: TMCP017
  ref: [MCP006]
  short: List tests for requirement with multiple tests
  long: Query which tests validate a requirement that has more than one test, verify they are sorted by ID
  prereq: [TMCP003]
  steps:
  - action: The client calls `list_testers_of` with ID `RF03`
    sample_lang: json
    sample: |
      {
        "id": 2,
        "jsonrpc": "2.0",
        "method": "tools/call",
        "params": {
          "name": "list_testers_of",
          "arguments": {"id": "RF03"}
        }
      }
  - action: Verify the response contains T03 and T04 sorted by ID
    sample_lang: json
    sample: |
      {
        "id": 2,
        "jsonrpc": "2.0",
        "result": {
          "structuredContent": {
            "tests": [
              {"category": "non-functional", "id": "T03", "short": "Create files"},
              {"category": "non-functional", "id": "T04", "short": "Yet another test"}
            ]
          }
        }
      }

- id: TMCP018
  ref: [MCP006]
  short: List tests for untested requirement
  long: Query which tests validate a requirement that has no associated tests, verify an empty list is returned
  prereq: [TMCP003]
  steps:
  - action: The client calls `list_testers_of` with ID `RF04`, a requirement with no tests
    sample_lang: json
    sample: |
      {
        "id": 2,
        "jsonrpc": "2.0",
        "method": "tools/call",
        "params": {
          "name": "list_testers_of",
          "arguments": {"id": "RF04"}
        }
      }
  - action: Verify an empty list is returned
    sample_lang: json
    sample: |
      {
        "id": 2,
        "jsonrpc": "2.0",
        "result": {
          "structuredContent": {
            "tests": []
          }
        }
      }

- id: TMCP019
  ref: [MCP006]
  short: Error when requirement ID does not exist
  long: |
    The user shall receive a tool execution error when calling list_testers_of
    with an ID that does not exist in the loaded specifications.
  prereq: [TMCP003]
  steps:
  - action: The client calls `list_testers_of` with a non-existent ID
    sample_lang: json
    sample: |
      {
        "id": 2,
        "jsonrpc": "2.0",
        "method": "tools/call",
        "params": {
          "name": "list_testers_of",
          "arguments": {"id": "NOTFOUND"}
        }
      }
  - action: Verify a tool execution error is returned indicating the ID was not found
    sample_lang: json
    sample: |
      {
        "id": 2,
        "jsonrpc": "2.0",
        "result": {
          "isError": true,
          "structuredContent": {
            "error": "Requirement NOTFOUND not found"
          }
        }
      }
